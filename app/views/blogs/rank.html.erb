
<%= render 'logged_in_user', blog: @blog %>
<br>
<br>
<table>
  <tr>
    <td><%= button_to t('Back'), blogs_path, method: :get,class: "btn btn-primary"%></td>
  </tr>
</table>  

<div>
  <ul class="nav nav-tabs" role="tablist">
    <li class="active" role="presentation">
      <a aria-controls="tab_q" data-toggle="tab" href="#tab_q" role="tab" class="button">ブログ閲覧数ランキング</a>
    </li>&nbsp;
    <li role="presentation">
      <a aria-controls="tab_w" data-toggle="tab" href="#tab_w" role="tab" class="button">ブログいいね数ランキング</a>
    </li>&nbsp;
    <li role="presentation">
      <a aria-controls="tab_e" data-toggle="tab" href="#tab_e" role="tab" class="button">ブログコメント数ランキング</a>
    </li>&nbsp;
      <li role="presentation">
      <a aria-controls="tab_r" data-toggle="tab" href="#tab_r" role="tab" class="button">ブログ投稿数ランキング</a>
    </li>
  </ul>
  <div class="tab-content">
    <div class="tab-pane active" id="tab_q" role="tabpanel">
      <p>
        <h3>ブログ閲覧数ランキング</h3>
        <table class="table">
          <thead>
            <tr>
              <th>順位</th>
              <th>名前</th>
              <th>閲覧数</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <% @most_viewed.each.with_index(1) do |blog, i| %>
              <tr>
                <td><%= "#{i}" %></td>
                <td><%= blog.title %></td>
                <td><%= blog.impressions_count %></td>
                <td><%= button_to '記事を見る',blog, method: :get,class: "btn btn-primary" %></td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </p>
    </div>
    <div class="tab-pane" id="tab_w" role="tabpanel">
      <p>
        <h3>ブログいいね数ランキング</h3>
        <table class="table">
          <thead>
            <tr>
              <th>順位</th>
              <th>名前</th>
              <th>いいね数</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <% @all_ranks.each.with_index(1) do |blog, i| %>
              <tr>
                <td><%= "#{i}" %></td>
                <td><%= blog.title %></td>
                <td><%=blog.likes.count %></td>
                <td><%= button_to '記事を見る',blog, method: :get,class: "btn btn-primary" %></td>
              </tr>
            <% end %>
          </tbody>
          </table>
      </p>
    </div>
    <div class="tab-pane" id="tab_e" role="tabpanel">
      <p>
        <h3>ブログコメント数ランキング</h3>
        <table class="table">
          <thead>
            <tr>
              <th>順位</th>
              <th>名前</th>
              <th>コメント数</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <% @all_ranks_comment.each.with_index(1) do |blog, i| %>
              <tr>
                <td><%= "#{i}" %></td>
                <td><%= blog.title %></td>
                <td><%=blog.comments.count %></td>
                <td><%= button_to '記事を見る',blog, method: :get,class: "btn btn-primary" %></td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </p>
    </div>
    <div class="tab-pane" id="tab_r" role="tabpanel">
      <p>
        <h3>ブログ投稿数ランキング</h3>
        <table class="table">
          <thead>
            <tr>
              <th>順位</th>
              <th>ユーザ名</th>
              <th>投稿数</th>
            </tr>
          </thead>
          <tbody>
            <% @all_ranks_user_blog.each.with_index(1) do |user, i| %>
              <tr>
                <td><%= "#{i}" %></td>
                <td><%= user.name %></td>
                <td><%=user.blogs.count %></td>
                </tr>
            <% end %>
          </tbody>
        </table>
      </p>
    </div>
  </div>
</div>